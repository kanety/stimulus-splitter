!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@hotwired/stimulus"),require("@kanety/stimulus-static-actions")):"function"==typeof define&&define.amd?define(["@hotwired/stimulus","@kanety/stimulus-static-actions"],e):(t||self).StimulusSplitter=e(t.Stimulus)}(this,function(t){class e{constructor(t){this.controller=t}get key(){return this.controller.storeKeyValue}get splitters(){return this.controller.splitters}load(){if(this.key){var t=this.constructor.load(this.key);t&&this.splitters.forEach(e=>{var s=t[this.controller.getID(e)],i=e.previousElementSibling;this.controller.isVertical(e)?i.style.width=s[0]+"px":i.style.height=s[1]+"px"})}}save(){if(this.key){var t={};this.splitters.forEach(e=>{var s=e.previousElementSibling;t[this.controller.getID(e)]=[s.offsetWidth,s.offsetHeight]}),this.constructor.save(this.key,t)}}static load(t){var e=sessionStorage.getItem(t);try{return JSON.parse(e)}catch(t){return null}}static save(t,e){sessionStorage.setItem(t,JSON.stringify(e))}}class s extends t.Controller{get splitters(){return this.scope.findAllElements("[data-splitter-id]")}initialize(){this.store=new e(this)}connect(){this.store.load()}start(t){if(this.splitter=this.splitters.find(e=>e==t.target),this.splitter){[this.startX,this.startY]=this.getXY(t);var e=this.splitter.previousElementSibling,s=this.splitter.nextElementSibling;this.startSize1={width:e.offsetWidth,height:e.offsetHeight},this.startSize2={width:s.offsetWidth,height:s.offsetHeight},this.toggleClass(this.splitter,!0),this.disableIframe(!0),this.context.actionSet.add(this.constructor.dragActions)}}move(t){var[e,s]=this.getXY(t),i=this.splitter.previousElementSibling,r=this.splitter.nextElementSibling;if(this.isVertical(this.splitter)){var l=this.startSize1.width+(e-this.startX),a=this.startSize2.width-(e-this.startX);"both"==this.updateTargetValue||"width:both"==this.updateTargetValue?l>0&&a>0&&(i.style.width=l+"px",r.style.width=a+"px"):l>0&&(i.style.width=l+"px")}else{var h=this.startSize1.height+(s-this.startY),o=this.startSize2.height-(s-this.startY);"both"==this.updateTargetValue||"height:both"==this.updateTargetValue?h>0&&o>0&&(i.style.height=h+"px",r.style.height=o+"px"):h>0&&(i.style.height=h+"px")}}end(t){this.toggleClass(this.splitter,!1),this.disableIframe(!1),this.context.actionSet.remove(this.constructor.dragActions),this.dispatch("resized",{detail:{splitter:this.splitter}}),this.splitter=null,this.store.save()}prevent(t){t.preventDefault()}getXY(t){return[t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY]}toggleClass(t,e){e?t.classList.add("st-splitter--dragging"):t.classList.remove("st-splitter--dragging")}getID(t){return t.getAttribute("data-splitter-id")}isVertical(t){return t.parentNode.classList.contains("st-splitter-vertical")}disableIframe(t){document.querySelectorAll("iframe").forEach(e=>{e.style.pointerEvents=t?"none":""})}}return s.targets=["pane","splitter"],s.values={updateTarget:String,storeKey:String},s.actions=[["element","mousedown@document->start"],["element","touchstart@document->start"]],s.dragActions=[["element","mousemove@document->move"],["element","touchmove@document->move"],["element","mouseup@document->end"],["element","touchend@document->end"],["element","selectstart@document->prevent"]],s});
//# sourceMappingURL=index.umd.js.map
