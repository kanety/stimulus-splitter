import{Controller as t}from"@hotwired/stimulus";import"@kanety/stimulus-static-actions";class e{constructor(t){this.controller=t}get key(){return this.controller.storeKeyValue}get splitters(){return this.controller.splitters}load(){if(!this.key)return;let t=this.constructor.load(this.key);t&&this.splitters.forEach(e=>{let s=t[this.controller.getID(e)],i=e.previousElementSibling;this.controller.isVertical(e)?i.style.width=s[0]+"px":i.style.height=s[1]+"px"})}save(){if(!this.key)return;let t={};this.splitters.forEach(e=>{let s=e.previousElementSibling;t[this.controller.getID(e)]=[s.offsetWidth,s.offsetHeight]}),this.constructor.save(this.key,t)}static load(t){let e=sessionStorage.getItem(t);try{return JSON.parse(e)}catch(t){return null}}static save(t,e){sessionStorage.setItem(t,JSON.stringify(e))}}class s extends t{get splitters(){return this.scope.findAllElements("[data-splitter-id]")}initialize(){this.store=new e(this)}connect(){this.store.load()}start(t){if(this.splitter=this.splitters.find(e=>e==t.target),!this.splitter)return;[this.startX,this.startY]=this.getXY(t);let e=this.splitter.previousElementSibling,s=this.splitter.nextElementSibling;this.startSize1={width:e.offsetWidth,height:e.offsetHeight},this.startSize2={width:s.offsetWidth,height:s.offsetHeight},this.toggleClass(this.splitter,!0),this.disableIframe(!0),this.context.actionSet.add(this.constructor.dragActions)}move(t){let[e,s]=this.getXY(t),i=this.splitter.previousElementSibling,r=this.splitter.nextElementSibling;if(this.isVertical(this.splitter)){let t=this.startSize1.width+(e-this.startX),s=this.startSize2.width-(e-this.startX);"both"==this.updateTargetValue||"width:both"==this.updateTargetValue?t>0&&s>0&&(i.style.width=t+"px",r.style.width=s+"px"):t>0&&(i.style.width=t+"px")}else{let t=this.startSize1.height+(s-this.startY),e=this.startSize2.height-(s-this.startY);"both"==this.updateTargetValue||"height:both"==this.updateTargetValue?t>0&&e>0&&(i.style.height=t+"px",r.style.height=e+"px"):t>0&&(i.style.height=t+"px")}}end(t){this.toggleClass(this.splitter,!1),this.disableIframe(!1),this.context.actionSet.remove(this.constructor.dragActions),this.dispatch("resized",{detail:{splitter:this.splitter}}),this.splitter=null,this.store.save()}prevent(t){t.preventDefault()}getXY(t){return[t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY]}toggleClass(t,e){e?t.classList.add("st-splitter--dragging"):t.classList.remove("st-splitter--dragging")}getID(t){return t.getAttribute("data-splitter-id")}isVertical(t){return t.parentNode.classList.contains("st-splitter-vertical")}disableIframe(t){document.querySelectorAll("iframe").forEach(e=>{e.style.pointerEvents=t?"none":""})}}s.targets=["pane","splitter"],s.values={updateTarget:String,storeKey:String},s.actions=[["element","mousedown@document->start"],["element","touchstart@document->start"]],s.dragActions=[["element","mousemove@document->move"],["element","touchmove@document->move"],["element","mouseup@document->end"],["element","touchend@document->end"],["element","selectstart@document->prevent"]];export{s as default};
//# sourceMappingURL=index.modern.js.map
